import{Cb as _,Da as x,Eb as A,Ib as y,J as l,Jb as c,N as f,Pa as S,Qa as a,Ra as p,Xa as I,Ya as b,Za as v,aa as g,ab as C,bb as w,pa as u,pb as D,ya as h}from"./chunk-MX4I3CJ5.js";var T=class o{constructor(e){this.auth=e}accountsSig=g([]);txSig=g([]);accounts=this.accountsSig.asReadonly();transactions=this.txSig.asReadonly();totalBalance=D(()=>this.accountsSig().reduce((e,t)=>e+t.balance,0));load(e,t){this.accountsSig.set(e),this.txSig.set(t)}createAccount(e,t,n=0){let i=this.auth.user()?.id;if(!i)throw new Error("User not logged in");let r={id:c(),userId:i,name:e,iban:t,balance:n};return this.accountsSig.set([r,...this.accountsSig()]),r}accountsForCurrentUser(){let e=this.auth.user()?.id;return this.accountsSig().filter(t=>t.userId===e)}transfer(e,t,n,i){if(n<=0)throw new Error("Amount must be positive");let r=this.accountsSig().find(d=>d.id===e),s=this.accountsSig().find(d=>d.id===t);if(!r||!s)throw new Error("Invalid accounts");if(r.balance<n)throw new Error("Insufficient funds");r.balance-=n,s.balance+=n;let m=new Date().toISOString(),M={id:c(),accountId:r.id,amount:n,type:"DEBIT",memo:i,createdAt:m},N={id:c(),accountId:s.id,amount:n,type:"CREDIT",memo:i,createdAt:m};this.txSig.set([M,N,...this.txSig()]),this.accountsSig.set([...this.accountsSig()])}filteredTransactions({type:e,from:t,to:n}){let i=this.txSig();return e&&e!=="ALL"&&(i=i.filter(r=>r.type===e)),t&&(i=i.filter(r=>new Date(r.createdAt)>=new Date(t))),n&&(i=i.filter(r=>new Date(r.createdAt)<=new Date(n))),i}static \u0275fac=function(t){return new(t||o)(f(y))};static \u0275prov=l({token:o,factory:o.\u0275fac,providedIn:"root"})};var B=["*"];function O(o,e){if(o&1&&(a(0,"header",3),C(1),p()),o&2){let t=I();u(),w(t.title)}}var E=class o{title;static \u0275fac=function(t){return new(t||o)};static \u0275cmp=h({type:o,selectors:[["app-card"]],inputs:{title:"title"},ngContentSelectors:B,decls:4,vars:1,consts:[[1,"card"],["class","card__header",4,"ngIf"],[1,"card__content"],[1,"card__header"]],template:function(t,n){t&1&&(b(),a(0,"section",0),x(1,O,2,1,"header",1),a(2,"div",2),v(3),p()()),t&2&&(u(),S("ngIf",n.title))},dependencies:[A,_],styles:[".card[_ngcontent-%COMP%]{background:var(--card);border-radius:14px;padding:1rem;box-shadow:0 8px 20px #000;margin:.5rem 0;margin-top:40px;margin-left:25px;transition:transform .2s,box-shadow .2s;max-width:360px}.card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 12px 24px #000}.card__header[_ngcontent-%COMP%]{font-weight:700;font-size:1.25rem;margin-bottom:1.25rem;color:var(--text)}.card__content[_ngcontent-%COMP%]{color:var(--text);line-height:1.6}"]})};export{T as a,E as b};
